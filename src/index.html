<!DOCTYPE html>
<html>
  <head>
    <title>DND Map Designer Studio Suite Liteâ„¢</title>
    <meta name="author" content="Rachel Wang">
    <meta name="author" content="Vince LaGrassa">
  </head>
  <body>
    <div id="elm-app"></div>
    
    <script src="elm-app.js"></script>
    <script>
      var app = Elm.Main.init({
        node: document.getElementById("elm-app")
      });

      // Locate the SVG element storing the map
      var canvas = document.getElementById('map_canvas_container');
      while (canvas.tagName != "svg") {
        canvas = canvas.firstChild
      }

      // Send in the mouse's position relative to the canvas
      canvas.addEventListener('mousemove', e => {
        app.ports.receiveMouseMove.send({x: e.offsetX, y: e.offsetY});
      });

      // Send in a null/Nothing value when the mouse leaves the canvas
      canvas.addEventListener('mouseleave', e => {
        app.ports.receiveMouseMove.send(null);
      });
    </script>
  </body>
</html>